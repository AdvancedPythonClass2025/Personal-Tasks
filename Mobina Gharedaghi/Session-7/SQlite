import sqlite3

conn = sqlite3.connect('users.db')
cursor = conn.cursor()

cursor.execute('''
CREATE TABLE IF NOT EXISTS users (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    email TEXT UNIQUE NOT NULL
)
''')
conn.commit()

def create_user(name, email):
    try:
        cursor.execute("INSERT INTO users (name, email) VALUES (?, ?)", (name, email))
        conn.commit()
        print("âœ… Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ Ù…ÙˆÙÙ‚ÛŒØª Ø§ÛŒØ¬Ø§Ø¯ Ø´Ø¯.")
    except sqlite3.IntegrityError:
        print("âš ï¸ Ø®Ø·Ø§: Ø§ÛŒÙ…ÛŒÙ„ ØªÚ©Ø±Ø§Ø±ÛŒ Ø§Ø³Øª.")

def read_users():
    cursor.execute("SELECT * FROM users")
    users = cursor.fetchall()
    print("ğŸ“‹ Ù„ÛŒØ³Øª Ú©Ø§Ø±Ø¨Ø±Ø§Ù†:")
    for user in users:
        print(user)

def update_user(user_id, new_name, new_email):
    cursor.execute("UPDATE users SET name = ?, email = ? WHERE id = ?", (new_name, new_email, user_id))
    conn.commit()
    if cursor.rowcount:
        print("ğŸ”„ Ú©Ø§Ø±Ø¨Ø± Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯.")
    else:
        print("âŒ Ú©Ø§Ø±Ø¨Ø± Ø¨Ø§ Ø§ÛŒÙ† Ø´Ù†Ø§Ø³Ù‡ Ù¾ÛŒØ¯Ø§ Ù†Ø´Ø¯.")

def delete_user(user_id):
    cursor.execute("DELETE FROM users WHERE id = ?", (user_id,))
    conn.commit()
    if cursor.rowcount:
        print("ğŸ—‘ï¸ Ú©Ø§Ø±Ø¨Ø± Ø­Ø°Ù Ø´Ø¯.")
    else:
        print("âŒ Ú©Ø§Ø±Ø¨Ø±ÛŒ Ø¨Ø§ Ø§ÛŒÙ† Ø´Ù†Ø§Ø³Ù‡ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.")

# ==== Ù†Ù…ÙˆÙ†Ù‡ Ø§Ø³ØªÙØ§Ø¯Ù‡ ====
if name == '__main__':
    while True:
        print("\n1. Ø§ÛŒØ¬Ø§Ø¯ Ú©Ø§Ø±Ø¨Ø±")
        print("2. Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ú©Ø§Ø±Ø¨Ø±Ø§Ù†")
        print("3. Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ú©Ø§Ø±Ø¨Ø±")
        print("4. Ø­Ø°Ù Ú©Ø§Ø±Ø¨Ø±")
        print("5. Ø®Ø±ÙˆØ¬")

        choice = input("ÛŒÚ© Ú¯Ø²ÛŒÙ†Ù‡ Ø±Ø§ Ø§Ù†ØªØ®Ø§Ø¨ Ú©Ù†ÛŒØ¯: ")

        if choice == '1':
            name = input("Ù†Ø§Ù…: ")
            email = input("Ø§ÛŒÙ…ÛŒÙ„: ")
            create_user(name, email)

        elif choice == '2':
            read_users()

        elif choice == '3':
            user_id = int(input("Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø± Ø¨Ø±Ø§ÛŒ Ø¨Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ: "))
            new_name = input("Ù†Ø§Ù… Ø¬Ø¯ÛŒØ¯: ")
            new_email = input("Ø§ÛŒÙ…ÛŒÙ„ Ø¬Ø¯ÛŒØ¯: ")
            update_user(user_id, new_name, new_email)

        elif choice == '4':
            user_id = int(input("Ø´Ù†Ø§Ø³Ù‡ Ú©Ø§Ø±Ø¨Ø± Ø¨Ø±Ø§ÛŒ Ø­Ø°Ù: "))
            delete_user(user_id)

        elif choice == '5':
            print("ğŸ‘‹ Ø®Ø±ÙˆØ¬ Ø§Ø² Ø¨Ø±Ù†Ø§Ù…Ù‡.")
            break

        else:
            print("âŒ Ú¯Ø²ÛŒÙ†Ù‡ Ù†Ø§Ù…Ø¹ØªØ¨Ø± Ø§Ø³Øª.")
